<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script>
        $(document).ready(function () {
            show_article();
        });

        function show_article() {
            $.ajax({
                type: "GET",
                url: "/team/read",
                data: {},
                success: function (response) {
                    console.log(response)
                    let rows = response['all_article']
                    $('#article-list').empty()

                    for (i = 0; i < rows.length; i++) {
                        let article = rows[i]['article']
                        let number = rows[i]['num']
                        let like = rows[i]['like']


                        let temp_html =
                            `<li>
                            ${article},
                            ${number},
                            ${like}
                            <button onClick="like_article(${number})" type="button">좋아요
                                </button>
                            <button onClick="dislike_article(${number})" type="button">싫어요
                                </button>
                            </li>`

                        $('#article-list').append(temp_html)
                    }


                }


            });
        }


        function post_article() {
            let article = $('#article').val()
            $.ajax({
                type: "POST",
                url: "/team/write",
                data: {article_give: article},
                success: function (response) {
                    alert(response["msg"])
                    show_article();
                }
            });
        }

        function like_article(num) {
            $.ajax({
                type: "POST",
                url: "/team/write/likes",
                data: {number_give: num},
                success: function (response) {
                    alert(response["msg"])
                    show_article();

                }
            });
        }

        function dislike_article(num) {
            $.ajax({
                type: "POST",
                url: "/team/write/dislikes",
                data: {number_give: num},
                success: function (response) {
                    alert(response["msg"])
                    show_article();

                }
            });
        }







    </script>
</head>
<body>
<h1>hello world!</h1>

<input type="text" id="article">
<button type="submit" onclick="post_article()">등록하기</button>

<div>
    <ul id="article-list">
        <li>d</li>
    </ul>

</div>

</body>
</html>